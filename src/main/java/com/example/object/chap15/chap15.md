#### 디자인 패턴과 프레임워크

- 디자인패턴
  - 소프트웨어 설계에서 반복적으로 발생하는 문제에 대해 반복적으로 적용할 수 있는 해결방법
  - 목적은 설계의 재사용
  - 협력을 일관성있게 만들기 위해 재사용할 수 있는 설계의 묶음

- 프레임워크
  - 애플리케이션의 아키텍처를 구현 코드의 형태로 제공
  - 목적은 설계와 코드를 함께 재사용하기 위한 것
  - 일관성있는 협력을 제공하는 확장 가능한 코드

- 디자인 패턴, 프레임워크 모두 협력을 일관성있게 만들기 위한 방법

##### 디자인 패턴과 설계 재사용

- 소프트웨어 패턴
  - 패턴이란 무엇인가 논의할 때면 반복적으로 언급되는 핵심적인 특징
    - 패턴은 반복적으로 발생하는 문제와 해법의 쌍으로 정의된다
    - 패턴을 사용함으로써 이미 알려진 문제와 이에 대한 해법을 문서로 정리할 수 있으며, 이 지식을 다른 사람과 의사소통할 수 있다
    - 패턴은 추상적인 원칙과 실제 코드 작성 사이의 간극을 메ㅔ워주며 실질적인 코드 작성을 돕는다
    - 패턴의 요점은 패턴이 실무에서 탄생했다는 점이다
  - 프로젝트 조직 구성, 일정 추정 방법 등 모든 영역이 패턴에 대상이 될 수 있다

- 패턴 분류
  - 패턴의 적용범위나 적용단계에 따라 아키텍처 패턴, 분석 패턴, 디자인 패턴, 이디엄으로 분류한다
  - 아키텍처 패턴
    - 소프트웨어 전체적인 구조를 결정하기 위해 사용
    - 미리 정의된 서브시스템들을 제공하고 각 서브시스템들의 책임을 정의하며 서브시스템들 사이의 관계를 조직화하는 규칙과 가이드라인을 포함한다
  - 이디엄
    - 특정 프로그래밍 언어에 국한된 하위 레벨 패턴
    - 주어진 언어의 기능을 사용해 컴포넌트 혹은 컴포넌트 간의 특정 측면을 구현하는 방법
  - 분석 패턴
    - 도메인 내의 개념적인 문제 해결에 초점을 맞춘다.
    - 분석 패턴은 업무 모델링 시에 발견되는 공통적인 구조를 표현하는 개념들의 집합

- 패턴과 책임-주도 설계
  - 객체 지향 설계에서 가장 중요한 일은 올바른 책임을 올바른 객체에게 할당하고 객체 간의 유연한 협력 관계를 구축하는 일
  - 책임과 협력의 윤곽은 캡슐화, 크기, 의존성, 유연성, 성능, 확장 가능성, 재사용성 등의 다양한 요소들의 트레이드오프를 통해 결정된다
  - 패턴은 공통으로 사용할 수 있는 역할, 책임, 협력의 템플릿이다.
    - STRATEGY PATTERN: 다양한 알고리즘을 동적으로 교체할 수 있는 역할과 책임의 집합을 제공
    - BRIDGE PATTERN: 추상화의 조합으로 인한 클래스의 폭발적인 증가 문제를 해결하기 위해 역할과 책임을 추상화와 구현의 두 개의 커다란 집합으로 분해함으로써 설계를 확장 가능하도록 만든다.
    - OBSERVER PATTERN: 유연한 통지 메커니즘을 구축하기 위해 객체 간의 결합도를 낮출 수 있는 역할과 책임의 집합을 제공
  - 패턴의 구성요소는 클래스가 아닌 역할과 책임이다
    - COMPOSITE PATTERN: 클라이언트가 개별 객체와 복합 객체를 동일하게 취급할 수 있는 패턴

- 캡슐화와 디자인 패턴
  - 대부분의 디자인 패턴은 협력을 일관성있고 유연하게 만드는 것이 목적
  - 각 디자인 패턴은 변경을 캡슐화하기 위한 독자적인 방법을 정의하고 있다.
    - STRATEGY PATTERN
      - 알고리즘의 변경을 캡슐화하고 이를 구현하기 위해 객체 합성을 이용
    - TEMPLATE METHOD PATTERN
      - 알고리즘의 변경을 캡슐화하고 이를 합성이 아닌 상속을 이용
    - DECORATOR PATTERN
      - 객체의 행동을 동적으로 추가할 수 있게 해주는 패턴으로 기본적으로 객체의 행동을 결합하기 위해 객체 합성을 사용
    - COMPOSITE PATTERN
      - 개별 객체와 복합 객체라는 객체의 수와 관련된 변경을 캡슐화하는 것이 목적

- 패턴은 출발점이다
  - 패턴을 사용하며 생기는 문제점은 패턴을 맹목적으로 사용할 때 발생한다.
  - 다양한 트레이드오프 관계속에서 패턴을 적용하고 사용하는 것이 중요하다

##### 프레임워크와 코드 재사용

- 코드 재사용 대 설계 재사용
  - 가장 이상적인 형태의 재사용 방법은 설계 재사용과 코드 재사용을 적절한 수준으로 조합하는 것
  - 프레임워크란?
    - 추상클래스나 인터페이스를 정의하고 인스턴스 사이의 상호작용을 통해 시스템 전체 혹인 일부를 구현해 놓은 재사용 가능한 설계
    - 애플리케이션 개발자가 현재의 요구사항에 맞게 커스터마이징할 수 있는 애플리케이션의 골격

- 상위 정책과 하위 정책으로 패키지 분리
  - 상위정책은 상대적으로 변경에 안정적이지만 세부사항은 자주 변경된다.
  - 상위정책이 세부사항에 비해 재사용될 가능성이 높다
  - 그렇기 때문에 변하는 것과 변경하지 않는 것을 서로 분리해야 한다
    - 별도의 패키지로 분리
    - 상위 정책을 구현하는 패키지(변하지 않는 것) 과 세부사항을 구현하는 패키지(변하는 것)를 분
  - 패키지 사이의 의존성 방향
    - 의존성 역전 원리에 따라 추상화에만 의존하도록 의존성의 방향을 조정하고 추상화를 경계로 페키지를 분리했기 때문에 세부사항을 구현한 패키지는 항상 상위 정책을 구현한 패키지에 의존해야 한다.

- 제어 역전 원리
  - 의존성 역전 원리는 프레임워크의 가장 기본적인 설계 매커니즘이다
  - 의존성 역전은 의존성의 방향뿐만 아니라 제어 흐름의 주체 역시 역전시킨다.
    - 제어 역전 원리, 할리우드 원리라고 부른다
  - 개발자는 프레임워크가 적절한 시점에 실행할 것으로 예상되는 코드를 작성할 뿐이다.
    - 제어가 개발자에서 프레임워크로 넘어가 버린 것이다
  - 제어 역전 원리는 프레임워크에 가장 핵심적인 개념이며 코드의 재사용을 가능하게 하는 힘이다