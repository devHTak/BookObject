#### 테스트 구축하기
- 리팩터링을 제대로 하려면 불가피한 실수를 잡아줄 수 있는 견고한 테스트가 있어야 한다

##### 자가 테스트 코드의 가치
- 실제로 코드를 설계하는 시간 보다 디버깅 하는 시간이 훨씬 더 많이 소요된다 
  - 테스트 코드를 작성하면 버그가 발생했을 때 어느 부분을 수정할 지 빠르게 감지할 수 있기 때문에 결과적으로 개발시간을 단축이 가능하다
- 코드를 작성할 때 테스트도 동시에 작성한다. 
  - 만약 테스트코드가 없는 코드를 리팩터링하게 된다면 먼저 자가 테스트 코드부터 작성하자

##### 첫번째 테스트
- 먼저 테스트 프레임워크 선정
- 테스트 코드 구조 
  - 테스트에 필요한 데이터와 객체를 뜻하는 픽스처를 설정 
  - 이 픽스처의 속성을 검증, 생산 부족분을 정확히 계산했는지 확인 필요
- 실패해야 할 상황에는 실패 테스트 케이스를 만들자
- 테스트 주기 
  - 자주 테스트하는 것이좋다. 작성중인 코드는 작성하면서 테스트를 진행하고 적어도 하루에 한번은 전체 테스트를 실행하자

##### 테스트 추가하기
- 테스트는 위험한 요인을 중심으로 작성하자 
  - 클래스가 하는 모든 일을 테스트하는 것보다는 버그를 찾아내는 목적에 맞게 해당 부분을 찾아서 작성하자 
  - 완벽하게 만드느라 테스트를 수행하지 못하는 것보다 불완전한 테스트라도 작성해여 실행하는 것이 좋다
- 매 테스트에서는 다른 픽스처를 사용하자 
  - 테스트끼리 상호작용하게 하는 공유 픽슬처는 버그 중 가장 지저분한 유형이다
- 공유 픽스처를 생성시키면, 픽스처를 사용하는 또 다른 테스트가 실패할 수도 있음

##### 픽스처 수정하기
- 흔히 beforeEach에서 설정한 표준 픽스처를 취해서 테스트를 수행하고, 이 픽스처가 일을 기대한 대로 처리했는지를 검증한다
- 검증할 때에는 구문 하나당 검증도 하나씩만 하는 것이 좋다 
  - 앞쪽 검증을 통과하지 못하면 나머지 검증은 실행하지 못하기 때문에 실패 원인 파악에 정보를 놓치기 쉽기 때문이다

##### 경계 조건 검사하기
- 범위를 벗어나는 경계 지점에서 문제가 발생할 수 있기 때문에 경계 조건을 검사하자 
  - 문제가 생길 가능성이 있는 경계 조건을 생각해보고 그 부분을 집중적으로 테스트하기
- 특이사항 처리 
  - 만약 수요를 나타내는 세터에 음수가 전달되는 경우가 발생할 수 있는데, 이럴 때에는 예외를 던지거나 0으로 설정하는 식에 정상적인 경우와 다르게 처리해야 하는 경우가 있다.
  - 이러한 특이사항에 맞추어 테스트 코드 작성 또한 필요하다
- 용어 정리 
  - 실패(falilure): 실제 값이 예상 범위를 벗어남 
  - 에러(error): 검증보다 앞선 과정에서 발생한 예외 상황

##### 끝나지 않은 여정
- 단위 테스트는 코드의 작은 영역만을 대상으로 빠르게 실행되도록 설계된 테스트
  - 자가 테스트 코드의 핵심
  - 자가 테스트 시스템은 대부분 단위 테스트가 차지
- 컴포넌트 사이의 상호작용에 집중하는 테스트, 스프트웨어의 다양한 계층의 연동을 검사하는 테스트, 성능 문제를 다루는 테스트 등이 있음
- 제품 코드보다 테스트 코드를 수정하는 데 시간이 걸리면, 테스트를 과하게 작성한 것
  - 대부분의 경우는 테스트가 너무 적음